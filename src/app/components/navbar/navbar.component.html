<header class="fixed top-0 left-0 right-0 z-[100] transition-all duration-500 py-4" [class.py-0]="isScrolled"
    [class.scrolled]="isScrolled" #topSection>

    <!-- Background backdrop for the whole header on scroll -->
    <div class="absolute inset-0 bg-transparent backdrop-blur-0 transition-all duration-500"
        [class.bg-[var(--bg-main)]/80]="isScrolled" [class.backdrop-blur-xl]="isScrolled" [class.border-b]="isScrolled"
        [class.border-[var(--accent)]/20]="isScrolled">
    </div>

    <nav class="mx-auto max-w-[1400px] w-[95%] rounded-3xl flex items-center justify-between gap-6 px-10 py-5 relative transition-all duration-500 border border-white/10 shadow-2xl"
        [class.bg-[var(--bg-elevated)]/70]="!isScrolled" [class.backdrop-blur-md]="!isScrolled"
        [class.mt-0]="isScrolled" [class.rounded-none]="isScrolled" [class.w-full]="isScrolled"
        [class.max-w-none]="isScrolled" [class.px-[5%]]="isScrolled" [class.py-4]="isScrolled"
        [class.border-none]="isScrolled" [class.shadow-none]="isScrolled">

        <!-- Subtle Animated Shimmer -->
        <div
            class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent animate-shimmer pointer-events-none">
        </div>

        <!-- Brand Logo - Enhanced Color -->
        <a (click)="scrollToSection('home')"
            class="font-black text-2xl tracking-tighter text-[var(--accent)] transition-all duration-500 transform hover:scale-110 relative z-10 group cursor-pointer flex items-center gap-1"
            aria-label="Home">
            <span class="relative">
                E<span class="group-hover:animate-bounce inline-block text-[#f59e0b]">G</span>.
                <div
                    class="absolute -bottom-1 left-0 w-0 h-1 bg-gradient-to-r from-[var(--accent)] to-[#f59e0b] transition-all duration-500 group-hover:w-full rounded-full">
                </div>
            </span>
        </a>

        <div class="flex items-center gap-8">
            <!-- Navigation Links with New Icons -->
            <ul class="hidden lg:flex items-center gap-6 list-none m-0 p-0 text-sm font-bold tracking-tight">
                <li><a (click)="scrollToSection('about')"
                        class="cursor-pointer transition-all duration-300 flex items-center gap-2 px-4 py-2 rounded-xl relative group"
                        [class.text-[var(--accent)]]="activeSection() === 'about'"
                        [class.text-[var(--text)]]="activeSection() !== 'about'">
                        <i class="fas fa-id-card text-xs text-[#8b5cf6]" [class.animate-bounce]="activeSection() === 'about'"></i>
                        <span>Profile</span>
                        <div class="absolute bottom-0 left-4 right-4 h-0.5 bg-[var(--accent)] transform transition-transform duration-300"
                            [class.scale-x-100]="activeSection() === 'about'"
                            [class.scale-x-0]="activeSection() !== 'about'"></div>
                    </a></li>
                <li><a (click)="scrollToSection('skills')"
                        class="cursor-pointer transition-all duration-300 flex items-center gap-2 px-4 py-2 rounded-xl relative group"
                        [class.text-[var(--accent)]]="activeSection() === 'skills'"
                        [class.text-[var(--text)]]="activeSection() !== 'skills'">
                        <i class="fas fa-cogs text-xs text-[#ec4899]" [class.animate-bounce]="activeSection() === 'skills'"></i>
                        <span>Expertise</span>
                        <div class="absolute bottom-0 left-4 right-4 h-0.5 bg-[var(--accent)] transform transition-transform duration-300"
                            [class.scale-x-100]="activeSection() === 'skills'"
                            [class.scale-x-0]="activeSection() !== 'skills'"></div>
                    </a></li>
                <li><a (click)="scrollToSection('projects')"
                        class="cursor-pointer transition-all duration-300 flex items-center gap-2 px-4 py-2 rounded-xl relative group"
                        [class.text-[var(--accent)]]="activeSection() === 'projects'"
                        [class.text-[var(--text)]]="activeSection() !== 'projects'">
                        <i class="fas fa-briefcase text-xs text-[#06b6d4]"
                            [class.animate-bounce]="activeSection() === 'projects'"></i>
                        <span>Projects</span>
                        <div class="absolute bottom-0 left-4 right-4 h-0.5 bg-[var(--accent)] transform transition-transform duration-300"
                            [class.scale-x-100]="activeSection() === 'projects'"
                            [class.scale-x-0]="activeSection() !== 'projects'"></div>
                    </a></li>
                <li><a (click)="scrollToSection('contact')"
                        class="cursor-pointer transition-all duration-300 flex items-center gap-2 px-4 py-2 rounded-xl relative group"
                        [class.text-[var(--accent)]]="activeSection() === 'contact'"
                        [class.text-[var(--text)]]="activeSection() !== 'contact'">
                        <i class="fas fa-paper-plane text-xs text-[#f59e0b]" [class.animate-bounce]="activeSection() === 'contact'"></i>
                        <span>Contact</span>
                        <div class="absolute bottom-0 left-4 right-4 h-0.5 bg-[var(--accent)] transform transition-transform duration-300"
                            [class.scale-x-100]="activeSection() === 'contact'"
                            [class.scale-x-0]="activeSection() !== 'contact'"></div>
                    </a></li>
            </ul>

            <!-- Action Buttons -->
            <div class="flex items-center gap-4">
                <!-- Theme Toggle with Enhanced Colors -->
                <button (click)="toggleTheme()"
                    class="w-11 h-11 md:w-12 md:h-12 rounded-xl bg-[var(--bg-elevated)] border border-[var(--border)] flex items-center justify-center transition-all duration-300 hover:border-[#f59e0b] hover:text-[#f59e0b] transform hover:scale-110 active:scale-95 group shadow-lg"
                    [attr.aria-label]="themeService.isDarkMode() ? 'Switch to light mode' : 'Switch to dark mode'">
                    <div class="transition-all duration-500 group-hover:rotate-[360deg] text-xl">
                        <i *ngIf="themeService.isDarkMode()" class="fas fa-sun text-[#fbbf24]"></i>
                        <i *ngIf="!themeService.isDarkMode()" class="fas fa-moon text-[#6366f1]"></i>
                    </div>
                </button>

                <!-- Mobile Toggle -->
                <button
                    class="w-11 h-11 md:w-12 md:h-12 rounded-xl bg-[#f59e0b] text-white flex items-center justify-center transition-all duration-300 transform hover:scale-110 active:scale-95 shadow-lg lg:hidden relative z-10"
                    aria-label="Toggle navigation" (click)="toggleMenu()">
                    <div class="tricky-burger relative" [class.open]="isMenuOpen">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </button>
            </div>
        </div>
    </nav>

    <!-- Mobile Dropdown with Enhanced Colors -->
    <div class="lg:hidden absolute top-[5.5rem] left-[2.5%] w-[95%] rounded-[2.5rem] border border-[var(--border)] p-8 liquid-menu z-[90]"
        [class.expand]="isMenuOpen">

        <!-- Animated Content Layer -->
        <ul class="flex flex-col gap-3 relative z-10">
            <li><a (click)="scrollToSection('about')"
                    class="flex items-center gap-5 px-6 py-5 rounded-2xl transition-all duration-300 transform"
                    [class.bg-[var(--accent)]/10]="activeSection() === 'about'"
                    [class.text-[var(--accent)]]="activeSection() === 'about'"
                    [class.text-[var(--text)]]="activeSection() !== 'about'"
                    [class.scale-105]="activeSection() === 'about'">
                    <div class="w-10 h-10 rounded-xl bg-[var(--bg-main)] flex items-center justify-center shadow-inner">
                        <i class="fas fa-id-card text-[#8b5cf6]"></i>
                    </div>
                    <span class="font-bold text-lg">Profile</span>
                </a></li>
            <li><a (click)="scrollToSection('skills')"
                    class="flex items-center gap-5 px-6 py-5 rounded-2xl transition-all duration-300 transform"
                    [class.bg-[var(--accent)]/10]="activeSection() === 'skills'"
                    [class.text-[var(--accent)]]="activeSection() === 'skills'"
                    [class.text-[var(--text)]]="activeSection() !== 'skills'"
                    [class.scale-105]="activeSection() === 'skills'">
                    <div class="w-10 h-10 rounded-xl bg-[var(--bg-main)] flex items-center justify-center shadow-inner">
                        <i class="fas fa-cogs text-[#ec4899]"></i>
                    </div>
                    <span class="font-bold text-lg">Expertise</span>
                </a></li>
            <li><a (click)="scrollToSection('projects')"
                    class="flex items-center gap-5 px-6 py-5 rounded-2xl transition-all duration-300 transform"
                    [class.bg-[var(--accent)]/10]="activeSection() === 'projects'"
                    [class.text-[var(--accent)]]="activeSection() === 'projects'"
                    [class.text-[var(--text)]]="activeSection() !== 'projects'"
                    [class.scale-105]="activeSection() === 'projects'">
                    <div class="w-10 h-10 rounded-xl bg-[var(--bg-main)] flex items-center justify-center shadow-inner">
                        <i class="fas fa-briefcase text-[#06b6d4]"></i>
                    </div>
                    <span class="font-bold text-lg">Projects</span>
                </a></li>
            <li><a (click)="scrollToSection('contact')"
                    class="flex items-center gap-5 px-6 py-5 rounded-2xl transition-all duration-300 transform"
                    [class.bg-[var(--accent)]/10]="activeSection() === 'contact'"
                    [class.text-[var(--accent)]]="activeSection() === 'contact'"
                    [class.text-[var(--text)]]="activeSection() !== 'contact'"
                    [class.scale-105]="activeSection() === 'contact'">
                    <div class="w-10 h-10 rounded-xl bg-[var(--bg-main)] flex items-center justify-center shadow-inner">
                        <i class="fas fa-paper-plane text-[#f59e0b]"></i>
                    </div>
                    <span class="font-bold text-lg">Contact</span>
                </a></li>
        </ul>
    </div>
</header>
