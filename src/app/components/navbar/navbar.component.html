<header class="fixed top-0 left-0 right-0 z-[100] transition-all duration-500 py-4" [class.py-0]="isScrolled"
    [class.scrolled]="isScrolled" #topSection>

    <!-- Background backdrop for the whole header on scroll -->
    <div class="absolute inset-0 bg-transparent backdrop-blur-0 transition-all duration-500"
        [class.bg-[var(--bg-main)]/80]="isScrolled" [class.backdrop-blur-xl]="isScrolled" [class.border-b]="isScrolled"
        [class.border-[var(--accent)]/20]="isScrolled">
    </div>

    <nav class="mx-auto max-w-[1400px] w-[95%] rounded-full flex items-center justify-between gap-6 px-8 py-4 relative transition-all duration-500 border border-[var(--border)] shadow-2xl backdrop-blur-md"
        [class.bg-[var(--bg-elevated)]/60]="!isScrolled" [class.mt-4]="!isScrolled" [class.mt-0]="isScrolled"
        [class.rounded-none]="isScrolled" [class.w-full]="isScrolled" [class.max-w-none]="isScrolled"
        [class.px-[5%]]="isScrolled" [class.py-4]="isScrolled" [class.border-none]="isScrolled"
        [class.shadow-none]="isScrolled" [class.bg-[var(--bg-main)]/90]="isScrolled">

        <!-- Subtle Animated Shimmer -->
        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent animate-shimmer pointer-events-none rounded-full"
            [class.rounded-none]="isScrolled">
        </div>

        <!-- Brand Logo - Minimal & Clean -->
        <a (click)="scrollToSection('home')" class="group cursor-pointer flex items-center gap-1 z-10"
            aria-label="Home">
            <span
                class="font-black text-2xl tracking-tighter text-[var(--text)] transition-colors group-hover:text-[var(--accent)]">
                Eslam<span
                    class="text-[var(--accent)] text-3xl leading-none group-hover:text-[var(--text)] transition-colors">.</span>
            </span>
        </a>

        <div class="flex items-center gap-8">
            <!-- Navigation Links with New Icons -->
            <ul
                class="hidden lg:flex items-center gap-2 list-none m-0 p-0 text-sm font-medium tracking-wide bg-[var(--bg-main)]/50 p-1 rounded-full border border-[var(--border)] backdrop-blur-sm">

                <li>
                    <a (click)="scrollToSection('about')"
                        class="cursor-pointer transition-all duration-300 flex items-center gap-2 px-6 py-3 rounded-full relative overflow-hidden group"
                        [class.text-white]="activeSection() === 'about'"
                        [class.text-[var(--text-muted)]]="activeSection() !== 'about'"
                        [class.hover:text-[var(--accent)]]="activeSection() !== 'about'">

                        <!-- Active Pill Background -->
                        <div class="absolute inset-0 bg-[var(--accent)] transition-all duration-300 origin-center"
                            [class.opacity-100]="activeSection() === 'about'"
                            [class.opacity-0]="activeSection() !== 'about'"
                            [class.scale-100]="activeSection() === 'about'"
                            [class.scale-90]="activeSection() !== 'about'"></div>

                        <span class="relative z-10 flex items-center gap-2">
                            <span>Profile</span>
                            <i *ngIf="activeSection() === 'about'"
                                class="fas fa-check-circle text-xs animate-scaleIn"></i>
                        </span>
                    </a>
                </li>

                <li>
                    <a (click)="scrollToSection('skills')"
                        class="cursor-pointer transition-all duration-300 flex items-center gap-2 px-6 py-3 rounded-full relative overflow-hidden group"
                        [class.text-white]="activeSection() === 'skills'"
                        [class.text-[var(--text-muted)]]="activeSection() !== 'skills'"
                        [class.hover:text-[var(--accent)]]="activeSection() !== 'skills'">

                        <div class="absolute inset-0 bg-[var(--accent)] transition-all duration-300 origin-center"
                            [class.opacity-100]="activeSection() === 'skills'"
                            [class.opacity-0]="activeSection() !== 'skills'"
                            [class.scale-100]="activeSection() === 'skills'"
                            [class.scale-90]="activeSection() !== 'skills'"></div>

                        <span class="relative z-10 flex items-center gap-2">
                            <span>Expertise</span>
                            <i *ngIf="activeSection() === 'skills'"
                                class="fas fa-check-circle text-xs animate-scaleIn"></i>
                        </span>
                    </a>
                </li>

                <li>
                    <a (click)="scrollToSection('projects')"
                        class="cursor-pointer transition-all duration-300 flex items-center gap-2 px-6 py-3 rounded-full relative overflow-hidden group"
                        [class.text-white]="activeSection() === 'projects'"
                        [class.text-[var(--text-muted)]]="activeSection() !== 'projects'"
                        [class.hover:text-[var(--accent)]]="activeSection() !== 'projects'">

                        <div class="absolute inset-0 bg-[var(--accent)] transition-all duration-300 origin-center"
                            [class.opacity-100]="activeSection() === 'projects'"
                            [class.opacity-0]="activeSection() !== 'projects'"
                            [class.scale-100]="activeSection() === 'projects'"
                            [class.scale-90]="activeSection() !== 'projects'"></div>

                        <span class="relative z-10 flex items-center gap-2">
                            <span>Projects</span>
                            <i *ngIf="activeSection() === 'projects'"
                                class="fas fa-check-circle text-xs animate-scaleIn"></i>
                        </span>
                    </a>
                </li>

                <li>
                    <a (click)="scrollToSection('contact')"
                        class="cursor-pointer transition-all duration-300 flex items-center gap-2 px-6 py-3 rounded-full relative overflow-hidden group"
                        [class.text-white]="activeSection() === 'contact'"
                        [class.text-[var(--text-muted)]]="activeSection() !== 'contact'"
                        [class.hover:text-[var(--accent)]]="activeSection() !== 'contact'">

                        <div class="absolute inset-0 bg-[var(--accent)] transition-all duration-300 origin-center"
                            [class.opacity-100]="activeSection() === 'contact'"
                            [class.opacity-0]="activeSection() !== 'contact'"
                            [class.scale-100]="activeSection() === 'contact'"
                            [class.scale-90]="activeSection() !== 'contact'"></div>

                        <span class="relative z-10 flex items-center gap-2">
                            <span>Contact</span>
                            <i *ngIf="activeSection() === 'contact'"
                                class="fas fa-check-circle text-xs animate-scaleIn"></i>
                        </span>
                    </a>
                </li>
            </ul>

            <!-- Action Buttons -->
            <div class="flex items-center gap-4">
                <!-- Theme Toggle with Enhanced Colors -->
                <button (click)="toggleTheme()"
                    class="w-11 h-11 md:w-12 md:h-12 rounded-full bg-[var(--bg-elevated)] border border-[var(--border)] flex items-center justify-center transition-all duration-300 hover:border-[var(--accent)] hover:text-[var(--accent)] transform hover:scale-110 active:scale-95 group shadow-lg"
                    [attr.aria-label]="isDark() ? 'Switch to light mode' : 'Switch to dark mode'">
                    <div class="transition-all duration-500 group-hover:rotate-[360deg] text-xl">
                        <i [class]="isDark() ? 'fas fa-sun text-yellow-400' : 'fas fa-moon text-blue-500'"></i>
                    </div>
                </button>

                <!-- Mobile Toggle -->
                <button
                    class="w-11 h-11 md:w-12 md:h-12 rounded-xl bg-[#f59e0b] text-white flex items-center justify-center transition-all duration-300 transform hover:scale-110 active:scale-95 shadow-lg lg:hidden relative z-10"
                    aria-label="Toggle navigation" (click)="toggleMenu()">
                    <div class="tricky-burger relative" [class.open]="isMenuOpen">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </button>
            </div>
        </div>
    </nav>

    <!-- Mobile Dropdown with Enhanced Colors -->
    <div class="lg:hidden absolute top-[5.5rem] left-[2.5%] w-[95%] rounded-[2.5rem] border border-[var(--border)] p-8 liquid-menu z-[90]"
        [class.expand]="isMenuOpen">

        <!-- Animated Content Layer -->
        <ul class="flex flex-col gap-3 relative z-10">
            <li><a (click)="scrollToSection('about')"
                    class="flex items-center gap-5 px-6 py-5 rounded-2xl transition-all duration-300 transform hover:bg-[var(--accent)]/5 hover:text-[var(--accent)]"
                    [class.bg-[var(--accent)]/10]="activeSection() === 'about'"
                    [class.text-[var(--accent)]]="activeSection() === 'about'"
                    [class.text-[var(--text)]]="activeSection() !== 'about'"
                    [class.scale-105]="activeSection() === 'about'">
                    <div class="w-10 h-10 rounded-xl bg-[var(--bg-main)] flex items-center justify-center shadow-inner">
                        <i class="fas fa-id-card text-[#8b5cf6]"></i>
                    </div>
                    <span class="font-bold text-lg">Profile</span>
                </a></li>
            <li><a (click)="scrollToSection('skills')"
                    class="flex items-center gap-5 px-6 py-5 rounded-2xl transition-all duration-300 transform hover:bg-[var(--accent)]/5 hover:text-[var(--accent)]"
                    [class.bg-[var(--accent)]/10]="activeSection() === 'skills'"
                    [class.text-[var(--accent)]]="activeSection() === 'skills'"
                    [class.text-[var(--text)]]="activeSection() !== 'skills'"
                    [class.scale-105]="activeSection() === 'skills'">
                    <div class="w-10 h-10 rounded-xl bg-[var(--bg-main)] flex items-center justify-center shadow-inner">
                        <i class="fas fa-cogs text-[#ec4899]"></i>
                    </div>
                    <span class="font-bold text-lg">Expertise</span>
                </a></li>
            <li><a (click)="scrollToSection('projects')"
                    class="flex items-center gap-5 px-6 py-5 rounded-2xl transition-all duration-300 transform hover:bg-[var(--accent)]/5 hover:text-[var(--accent)]"
                    [class.bg-[var(--accent)]/10]="activeSection() === 'projects'"
                    [class.text-[var(--accent)]]="activeSection() === 'projects'"
                    [class.text-[var(--text)]]="activeSection() !== 'projects'"
                    [class.scale-105]="activeSection() === 'projects'">
                    <div class="w-10 h-10 rounded-xl bg-[var(--bg-main)] flex items-center justify-center shadow-inner">
                        <i class="fas fa-briefcase text-[#06b6d4]"></i>
                    </div>
                    <span class="font-bold text-lg">Projects</span>
                </a></li>
            <li><a (click)="scrollToSection('contact')"
                    class="flex items-center gap-5 px-6 py-5 rounded-2xl transition-all duration-300 transform hover:bg-[var(--accent)]/5 hover:text-[var(--accent)]"
                    [class.bg-[var(--accent)]/10]="activeSection() === 'contact'"
                    [class.text-[var(--accent)]]="activeSection() === 'contact'"
                    [class.text-[var(--text)]]="activeSection() !== 'contact'"
                    [class.scale-105]="activeSection() === 'contact'">
                    <div class="w-10 h-10 rounded-xl bg-[var(--bg-main)] flex items-center justify-center shadow-inner">
                        <i class="fas fa-paper-plane text-[#f59e0b]"></i>
                    </div>
                    <span class="font-bold text-lg">Contact</span>
                </a></li>
        </ul>
    </div>
</header>